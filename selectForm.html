<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ประเมิน</title>
    <link rel="icon" type="images/x-icon" href="./image/ya.png">
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            background-image: linear-gradient(to right, rgba(12, 123, 178, 0.871), rgba(237, 237, 220, 0.874));
        }

        /* Navbar styling */
        .navbar {
            border-bottom: 1px solid #ddd;
        }

        .navbar-brand {
            font-weight: bold;
        }

        .navbar-nav .nav-item .nav-link {
            padding: 0.5rem 1rem;
        }

        .navbar-nav .nav-item .nav-link.active {
            background-color: #e9ecef;
            border-radius: 0.375rem;
        }

        .d-flex {
            display: flex;
            align-items: center;
        }

        .d-flex p {
            margin: 0;
            color: #495057;
            font-size: 1rem;
            margin-right: 1rem;
            font-weight: 500;
        }

        .d-flex .btn-outline-danger {
            margin-left: 1rem;
        }

        .dropdown-menu {
            min-width: 200px;
        }
    </style>
</head>

<body>

    <center>
        <nav class="navbar navbar-expand-lg bg-body-tertiary">
            <div class="container-fluid">
                <a href="#"><img class="logo_nav img-fluid" src="./image/siemsee.gif" width="30px" height="30px"
                        alt="Logo"></a>
                <a class="navbar-brand" style="font-size: 15px; margin-left: 10px;">โรคปอดอุดกั้นเรื้อรัง</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavDropdown">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item">

                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="selectForm.html">ลงทะเบียน</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">คําแนะนําการปฏิบัติตัว</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                                aria-expanded="false">
                                เกี่ยวกับเรา
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="member.html">ประวัติจัดทำ</a></li>
                                <li><a class="dropdown-item" href="#">ผู้พัฒนา Application</a></li>
                            </ul>
                        </li>
                    </ul>
                    <div class="d-flex align-items-center ms-auto">
                        <p id="name">ชื่อ: </p>
                        <p id="surname">นามสกุล: </p>
                        <a href="logout.html" class="btn btn-outline-danger ms-3">ออกจากระบบ</a>
                    </div>
                </div>
            </div>
        </nav>

        <br>
    </center>
    <div class="container">
        <div class="row"></div>
        <br>
        <div class="row text-center p-1">
            <div class="col-sm-6" style="margin-bottom: 10px;">
                <div class="card">
                    <div class="card-body">
                        <br>
                        <h5 class="card-title"><b style="color: rgb(0, 177, 177);">ประเมิน mMRC / CAT</b></h5>
                        <hr>
                        <div class="container">
                            <img src="./image/copd.jpg" class="img-fluid" alt="COPD Image" width="45%" height="50%">
                        </div>
                        <hr>
                        <a href="./mmrc.html" class="btn btn-outline-info">กรอกข้อมูล</a>
                    </div>
                </div>
            </div>

            <div class="col-sm-6" style="margin-bottom: 10px;">
                <div class="card">
                    <div class="card-body">
                        <br>
                        <!-- <hr> -->
                        <h5 class="card-title"><b style="color: rgb(0, 177, 177);">เก็บรวบรวมข้อมูล</b></h5>
                        <hr>
                        <!-- <br> -->
                        <div class="container">
                            <img src="./image/logo_data.png" class="img-fluid" style="border-radius: 10px;"
                                alt="Logo Data Image" width="47%" height="50%">
                        </div>
                        <hr class="">
                        <a href="./smoke/smokeIndex.html" class="btn btn-outline-info">กรอกข้อมูล</a>
                    </div>
                </div>
            </div>

            <div class="col-sm-6" style="margin-bottom: 10px;">
                <div class="card">
                    <div class="card-body">
                        <hr>
                        <h5 class="card-title"><b style="color: rgb(0, 177, 177);">แบบประเมินการจัดการตนเอง</b></h5>
                        <hr>
                        <div class="container">
                            <img src="./image/evaluation.jpg" class="img-fluid" style="border-radius: 10px;"
                                alt="Evaluation Image" width="45%" height="50%">
                        </div>
                        <hr>
                        <a href="./mmrcAndCAT.html" class="btn btn-outline-info">กรอกข้อมูล</a>
                    </div>
                </div>
            </div>

            <div class="col-sm-6">
                <div class="card">
                    <div class="card-body">
                        <hr>
                        <h5 class="card-title"><b style="color: rgb(0, 177, 177);">QR Code</b></h5>
                        <hr>
                        <div class="container">
                            <img src="./image/copd.jpg" class="img-fluid" alt="QR Code Image" width="45%" height="50%">
                        </div>
                        <hr>
                        <a href="./mmrcAndCAT.html" class="btn btn-outline-info">กรอกข้อมูล</a>
                    </div>
                </div>
            </div>
        </div>

        <br><br>
        <div class="position-relative m-4">
            <div class="progress" role="progressbar" aria-label="Progress" aria-valuenow="50" aria-valuemin="0"
                aria-valuemax="100" style="height: 1px;">
                <div class="progress-bar"></div>
            </div>
            <button type="button"
                class="position-absolute top-0 start-0 translate-middle btn btn-sm btn-warning rounded-pill"
                style="width: 2rem; height:2rem;"><a href="./index.html"
                    style="color: white; text-decoration: none;">1</a></button>
            <button type="button"
                class="position-absolute top-0 start-50 translate-middle btn btn-sm btn-danger rounded-pill"
                style="width: 2rem; height:2rem;"><a href="./selectForm.html"
                    style="color: white; text-decoration: none;">2</a></button>
            <button type="button"
                class="position-absolute top-0 start-100 translate-middle btn btn-sm btn-secondary rounded-pill"
                style="width: 2rem; height:2rem;">3</button>
        </div>
    </div>

    <br><br>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

        <script>
            document.addEventListener('DOMContentLoaded', function () {
                // Extract URL parameters
                const urlParams = new URLSearchParams(window.location.search);
                const id = urlParams.get('id');
                const name = urlParams.get('name');
            
                // Retrieve id and name from localStorage
                const storedId = localStorage.getItem('userId');
                const storedName = localStorage.getItem('userName');
            
                if (id && name) {
                    // Store id and name in localStorage
                    localStorage.setItem('userId', id);
                    localStorage.setItem('userName', name);
            
                    console.log('ID:', id);
                    console.log('Name:', name);
            
                    fetch(`https://script.google.com/macros/s/AKfycbxQa-6-G30yyovFQUHbR-_YgdsSxaMKJD-ONvfaDaC-0i_0Ks-2x10pCwYd5CYArcdpGg/exec?id=${encodeURIComponent(id)}`)
                        .then(response => response.json())
                        .then(data => {
                            console.log('Fetched Data:', data);
                            document.getElementById('name').textContent = `ชื่อ: ${data.name || 'N/A'}`;
                            document.getElementById('surname').textContent = `นามสกุล: ${data.surname || 'N/A'}`;
                        })
                        .catch(error => console.error('Error fetching data:', error));
                } else if (storedId && storedName) {
                    // Retrieve id and name from localStorage if URL parameters are missing
                    console.log('Stored ID:', storedId);
                    console.log('Stored Name:', storedName);
            
                    fetch(`https://script.google.com/macros/s/AKfycbxQa-6-G30yyovFQUHbR-_YgdsSxaMKJD-ONvfaDaC-0i_0Ks-2x10pCwYd5CYArcdpGg/exec?id=${encodeURIComponent(storedId)}`)
                        .then(response => response.json())
                        .then(data => {
                            console.log('Fetched Data:', data);
                            document.getElementById('name').textContent = `ชื่อ: ${data.name || 'N/A'}`;
                            document.getElementById('surname').textContent = `นามสกุล: ${data.surname || 'N/A'}`;
                        })
                        .catch(error => console.error('Error fetching data:', error));
                } else {
                    console.error('No ID or name found in localStorage');
                }
            });
            </script>
            
</body>

</html>