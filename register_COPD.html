<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <title>ลงทะเบียน</title>
  <link rel="icon" type="image/x-icon" href="./image/ya.png">
  <style>
    html, body {
      height: 100%;
    }

    body {
      display: flex;
      flex-direction: column;
      background-image: linear-gradient(to right, rgba(14, 154, 254, 0.871), #06659b);
    }

    .container {
      flex: 1;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="position-relative m-4">
      <div class="position-relative m-4">
        <div class="progress" role="progressbar" aria-label="Progress" aria-valuenow="50" aria-valuemin="0"
          aria-valuemax="100" style="height: 1px;">
          <div class="progress-bar"></div>
        </div>
        <button type="button"
          class="position-absolute top-0 start-0 translate-middle btn btn-sm btn-warning rounded-pill"
          style="width: 2rem; height:2rem;"><a href="index.html"
            style="color: white; text-decoration: none;">1</a></button>
        <button type="button"
          class="position-absolute top-0 start-50 translate-middle btn btn-sm btn-warning rounded-pill"
          style="width: 2rem; height:2rem;"><a href="selectForm.html"
            style="color: white; text-decoration: none;">2</a></button>
        <button type="button"
          class="position-absolute top-0 start-100 translate-middle btn btn-sm btn-danger rounded-pill"
          style="width: 2rem; height:2rem;">3</button>
      </div>
      <div class="row">
        <div class="sign-up">
          <div class="col-md-6 offset-md-3">
            <form
              action="https://script.google.com/macros/s/AKfycbxm8t-gawuwewsgHWRvC-UKSURjVu5ehAQACdbqefMHLe4UoUPF4_iYaTZla3NsIufmgQ/exec"
              class="mt-5 border p-5 bg-light shadow" style="border-radius: 20px;" id="myForm"
              method="POST">
              <div class="row">
                <h3 class="mb-5 text-secondary"><b>กรอกข้อมูลส่วนตัว&nbsp; &nbsp;<a href="index.html"
                    style="color: red; position: absolute; text-decoration: none;">x</a></b>
                </h3>
              </div>
              <div class="row">

                <div class="mb-3 col-md-6">
                  <label for="">ชื่อ</label>
                  <input type="text" name="name" class="form-control" placeholder="ชื่อ" required>
                </div>
                <div class="mb-3 col-md-6">
                  <label for="">นามสกุล</label>
                  <input type="text" id="surname" name="surname" class="form-control"
                    placeholder="นามสกุล" required>
                </div>

                <div class="mb-3 col-md-6">
                  <label for="">เพศ</label>
                  <select name="gender" class="form-control">
                    <option value="ไม่ระบุเพศ">ไม่ระบุเพศ</option>
                    <option value="ชาย">ชาย</option>
                    <option value="หญิง">หญิง</option>
                  </select>
                </div>
                <div class="mb-3 col-md-6">
                  <label for="">อายุ</label>
                  <h5><input type="number" name="age" id="age" class="form-control" placeholder="อายุ ปี"
                      required></h5>
                </div>
                <div class="mb-3 col-md-6">
                  <label for="">อาชีพ</label>
                  <h5><input type="text" name="career" class="form-control"
                      placeholder="ระบุอาชีพปัจจุบัน" required></h5>
                </div>
                <div class="mb-3">
                  <label for="exampleFormControlTextarea1" class="form-label">เป้าหมาย ?</label>
                  <textarea class="form-control" id="goal" name="goal" rows="3"></textarea>
                </div>
                <div class="mb-3 col-md-12">
                  <br>
                  <input type="button" value="ส่ง" class="btn btn-primary col-2 mx-2"
                    id="submitButton" onclick="submitForm()">
                </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
      function submitForm() {
        // Get all the form inputs
        var name = document.getElementsByName('name')[0].value.trim();
        var surname = document.getElementById('surname').value.trim();
        var gender = document.getElementsByName('gender')[0].value;
        var age = document.getElementById('age').value.trim();
        var career = document.getElementsByName('career')[0].value.trim();
        var goal = document.getElementById('goal').value.trim();

        // Check if all fields are filled
        if (name === "" || surname === "" || gender === "" || age === "" || career === "" || goal === "") {
          Swal.fire({
            title: 'เกิดข้อผิดพลาด!',
            text: 'กรุณากรอกข้อมูลให้ครบทุกฟิลด์',
            icon: 'error',
            confirmButtonText: 'ตกลง'
          });
          return; // Stop the function from continuing
        }

        // ปิดการใช้งานปุ่มหลังจากคลิก
        document.getElementById('submitButton').disabled = true;

        var form = document.getElementById('myForm');
        var formData = new FormData(form);

        fetch('https://script.google.com/macros/s/AKfycbxm8t-gawuwewsgHWRvC-UKSURjVu5ehAQACdbqefMHLe4UoUPF4_iYaTZla3NsIufmgQ/exec', {
          method: 'POST',
          body: new URLSearchParams(formData)
        })
          .then(response => response.text())
          .then(data => {
            Swal.fire({
              title: 'สำเร็จ!',
              text: 'ฟอร์มของคุณถูกส่งแล้ว',
              icon: 'success',
              confirmButtonText: 'ตกลง'
            }).then(() => {
              // Redirect to another HTML page after successful form submission
              window.location.href = 'selectForm.html'; // Replace 'success.html' with the actual URL of your target page
            });
          })
          .catch(error => {
            Swal.fire({
              title: 'เกิดข้อผิดพลาด!',
              text: 'ไม่สามารถส่งฟอร์มได้',
              icon: 'error',
              confirmButtonText: 'ตกลง'
            });
            // เปิดการใช้งานปุ่มอีกครั้งในกรณีที่มีข้อผิดพลาด
            document.getElementById('submitButton').disabled = false;
          });
      }
    </script>

</body>

</html>
